<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Калкулатор</title>
  <style>
    :root { color-scheme: dark; }
    body {
      background: #121212;
      color: #ffffff;
      font-family: 'Segoe UI', sans-serif;
      margin: 0; padding: 1rem;
      max-width: 380px; margin: auto;
    }
    h1 {
      font-size: 20px;
      text-align: center;
      margin-bottom: 1rem;
      color: #4CAF50;
      border-bottom: 1px solid #333;
      padding-bottom: 5px;
    }
    .tabs {
      display: flex;
      gap: 4px;
      margin-bottom: 1rem;
    }
    .tabs button {
      flex: 1;
      padding: 0.5rem;
      font-size: 13px;
      background: #1e1e1e;
      color: #fff;
      border: 1px solid #444;
      border-radius: 6px;
      transition: 0.2s;
    }
    .tabs button:hover {
      background: #292929;
    }
    .tabs button.active {
      background: #333;
      font-weight: bold;
      border-color: #666;
    }
    .section { display: none; }
    .section.active { display: block; }
    label {
      font-size: 13px;
      font-weight: bold;
      margin-top: 0.9rem;
      display: block;
      color: #a4ffb1;
    }
    input, select {
      width: 95%;
      padding: 6px 10px;
      margin-top: 4px;
      font-size: 13px;
      background: #ffffff;
      color: #000;
      border: 1px solid #ccc;
      border-radius: 6px;
      outline: none;
      transition: 0.2s;
    }
    input:focus, select:focus {
      border-color: #4CAF50;
      box-shadow: 0 0 0 1px #4CAF50;
    }
    .output {
      margin-top: 0.7rem;
      padding: 8px;
      font-size: 13px;
      background: #2a2a2a;
      border-left: 4px solid #4CAF50;
      border-radius: 5px;
    }
    footer {
      text-align: center;
      margin-top: 2rem;
      font-size: 11px;
      color: #888;
    }
  </style>
</head>
<body>
<h1>Комбиниран Калкулатор</h1>
<div class="tabs">
  <button id="tab-percent" class="active" onclick="show('percent')">Проценти</button>
  <button id="tab-vat" onclick="show('vat')">ДДС</button>
  <button id="tab-currency" onclick="show('currency')">Валута</button>
</div>

<div id="percent" class="section active">
  <label>Сума (отстъпка/надценка)</label>
  <input type="number" id="percentBase" oninput="calcPercent()"/>
  <label>Процент</label>
  <input type="number" id="percentValue" oninput="calcPercent()"/>
  <select id="percentType" onchange="calcPercent()">
    <option value="plus">+ Надценка</option>
    <option value="minus">– Отстъпка</option>
  </select>
  <div id="percentOutput" class="output"></div>
</div>

<div id="vat" class="section">
  <label>Сума с ДДС (20%)</label>
  <input type="number" id="vatGross" oninput="calcVatGross()"/>
  <div id="vatGrossRes" class="output"></div>
  <label>Сума без ДДС (20%)</label>
  <input type="number" id="vatNet" oninput="calcVatNet()"/>
  <div id="vatNetRes" class="output"></div>
  <label>Само ДДС (20%)</label>
  <input type="number" id="vatOnly" oninput="calcVatOnly()"/>
  <div id="vatOnlyRes" class="output"></div>
</div>

<div id="currency" class="section">
  <label>Лева (BGN)</label>
  <input type="number" id="bgn" oninput="convCur('bgn')"/>
  <label>Евро (EUR)</label>
  <input type="number" id="eur" oninput="convCur('eur')"/>
  <div class="output">Курс: 1 EUR = 1.95583 BGN</div>
</div>

<footer>by Dimitar Kolev</footer>

<script>
function show(id) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('.tabs button').forEach(b => b.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  document.getElementById('tab-' + id).classList.add('active');
}
function calcPercent() {
  const base = parseFloat(document.getElementById('percentBase').value) || 0;
  const pct = parseFloat(document.getElementById('percentValue').value) || 0;
  const type = document.getElementById('percentType').value;
  const result = type === 'plus' ? base * (1 + pct / 100) : base * (1 - pct / 100);
  const diff = Math.abs(result - base);
  document.getElementById('percentOutput').innerHTML =
    `Нова сума: ${result.toFixed(2)} лв<br>Разлика: ${diff.toFixed(2)} лв`;
}
function calcVatGross() {
  const v = parseFloat(document.getElementById('vatGross').value) || 0;
  const net20 = (v / 1.2).toFixed(2);
  const vat20 = (v - net20).toFixed(2);
  document.getElementById('vatGrossRes').innerHTML =
    `Нетна сума: ${net20} лв<br>ДДС (20%): ${vat20} лв`;
}
function calcVatNet() {
  const n = parseFloat(document.getElementById('vatNet').value) || 0;
  const gross20 = (n * 1.2).toFixed(2);
  const vat20 = (n * 0.2).toFixed(2);
  document.getElementById('vatNetRes').innerHTML =
    `С ДДС: ${gross20} лв<br>ДДС (20%): ${vat20} лв`;
}
function calcVatOnly() {
  const d = parseFloat(document.getElementById('vatOnly').value) || 0;
  const net20 = (d / 0.2).toFixed(2);
  const gross20 = (net20 * 1.2).toFixed(2);
  document.getElementById('vatOnlyRes').innerHTML =
    `Нетна сума: ${net20} лв<br>Общо с ДДС: ${gross20} лв`;
}
function convCur(src) {
  const rate = 1.95583;
  const b = document.getElementById('bgn');
  const e = document.getElementById('eur');
  const val = parseFloat(src === 'bgn' ? b.value : e.value) || 0;
  if (src === 'bgn') e.value = (val / rate).toFixed(2);
  else b.value = (val * rate).toFixed(2);
}
</script>
</body>
</html>


