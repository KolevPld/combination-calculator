<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Комбиниран Калкулатор</title>
<style>
  body {
    font-family: Arial, sans-serif;
    padding: 20px;
    max-width: 600px;
    margin: auto;
  }
  h1 { text-align: center; margin-bottom: 20px; }
  .tabs { display: flex; justify-content: space-around; margin-bottom: 20px; }
  .tabs button { flex: 1; padding: 10px; margin: 0 5px; cursor: pointer; }
  .tabs button.active { background-color: #e0e0e0; font-weight: bold; }
  .section { display: none; }
  .section.active { display: block; }
  label { display: block; margin-top: 10px; font-weight: bold; }
  input, select { width: 100%; padding: 8px; margin-top: 5px; }
  .output { background: #f0f0f0; padding: 10px; margin-top: 10px; border-radius: 5px; }
  footer { text-align: center; margin-top: 40px; font-size: 12px; color: #666; }
</style>
</head>
<body>
  <h1>Комбиниран Калкулатор</h1>

  <div class="tabs">
    <button id="tab-percent" class="active" onclick="show('percent')">Проценти</button>
    <button id="tab-vat" onclick="show('vat')">ДДС</button>
    <button id="tab-currency" onclick="show('currency')">BGN / EUR</button>
  </div>

  <div id="percent" class="section active">
    <label>Сума (надценка/отстъпка):</label>
    <input type="number" id="percentBase" oninput="calcPercent()"/>
    <label>Процент:</label>
    <input type="number" id="percentValue" oninput="calcPercent()"/>
    <select id="percentType" onchange="calcPercent()">
      <option value="plus">+ Надценка</option>
      <option value="minus">– Отстъпка</option>
    </select>
    <div id="percentOutput" class="output"></div>
  </div>

  <div id="vat" class="section">
    <label>Сума с ДДС:</label>
    <input type="number" id="vatGross" oninput="calcVatGross()"/>
    <div id="vatGrossRes" class="output"></div>
    <label>Сума без ДДС:</label>
    <input type="number" id="vatNet" oninput="calcVatNet()"/>
    <div id="vatNetRes" class="output"></div>
    <label>Само ДДС:</label>
    <input type="number" id="vatOnly" oninput="calcVatOnly()"/>
    <div id="vatOnlyRes" class="output"></div>
  </div>

  <div id="currency" class="section">
    <label>Лева (BGN):</label>
    <input type="number" id="bgn" oninput="convCur('bgn')"/>
    <label>Евро (EUR):</label>
    <input type="number" id="eur" oninput="convCur('eur')"/>
    <div class="output">Курс: 1 EUR = 1.95583 BGN</div>
  </div>

  <footer>by Dimitar Kolev</footer>

<script>
function show(id) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('.tabs button').forEach(b => b.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  document.getElementById('tab-' + id).classList.add('active');
}

function calcPercent() {
  const base = parseFloat(document.getElementById('percentBase').value) || 0;
  const pct = parseFloat(document.getElementById('percentValue').value) || 0;
  const type = document.getElementById('percentType').value;
  const out = document.getElementById('percentOutput');
  const result = type === 'plus'
    ? base * (1 + pct / 100)
    : base * (1 - pct / 100);
  const diff = Math.abs(result - base);
  out.innerHTML = `Нова сума: ${result.toFixed(2)} лв<br>Разлика: ${diff.toFixed(2)} лв`;
}

function calcVatGross() {
  const v = parseFloat(document.getElementById('vatGross').value) || 0;
  const net20 = (v / 1.2).toFixed(2), vat20 = (v - net20).toFixed(2);
  const net9 = (v / 1.09).toFixed(2), vat9 = (v - net9).toFixed(2);
  document.getElementById('vatGrossRes').innerHTML =
    `20 %: Нетна = ${net20} лв, ДДС = ${vat20} лв<br>9 %: Нетна = ${net9} лв, ДДС = ${vat9} лв`;
}

function calcVatNet() {
  const n = parseFloat(document.getElementById('vatNet').value) || 0;
  const gross20 = (n * 1.2).toFixed(2), vat20 = (n * 0.2).toFixed(2);
  const gross9 = (n * 1.09).toFixed(2), vat9 = (n * 0.09).toFixed(2);
  document.getElementById('vatNetRes').innerHTML =
    `20 %: Общo = ${gross20} лв, ДДС = ${vat20} лв<br>9 %: Общo = ${gross9} лв, ДДС = ${vat9} лв`;
}

function calcVatOnly() {
  const d = parseFloat(document.getElementById('vatOnly').value) || 0;
  const net20 = (d / 0.2).toFixed(2), gross20 = (net20 * 1.2).toFixed(2);
  const net9 = (d / 0.09).toFixed(2), gross9 = (net9 * 1.09).toFixed(2);
  document.getElementById('vatOnlyRes').innerHTML =
    `20 %: Нетна = ${net20} лв, Общо = ${gross20} лв<br>9 %: Нетна = ${net9} лв, Общо = ${gross9} лв`;
}

function convCur(src) {
  const rate = 1.95583;
  const b = document.getElementById('bgn');
  const e = document.getElementById('eur');
  const val = parseFloat(src === 'bgn' ? b.value : e.value) || 0;
  if (src === 'bgn') e.value = (val / rate).toFixed(2);
  else b.value = (val * rate).toFixed(2);
}
</script>
</body>
</html>


