<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>–ö–∞–ª–∫—É–ª–∞—Ç–æ—Ä</title>

  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#121212">
  <style>
    :root { color-scheme: dark; }
    body { background: #121212; color: #ffc; font-family: Arial, sans-serif;
      margin: 0; padding: 1rem; max-width: 380px; margin:auto; }
    h1 { font-size: 20px; text-align: center; margin-bottom:1rem; color:#4CAF50; border-bottom:1px solid#333; padding-bottom:5px; }
    .tabs { display: flex; gap:4px; margin-bottom:1rem; }
    .tabs button { flex:1; padding:0.5rem; background:#1e1e1e; color:#fff; border:1px solid#444; border-radius:6px; }
    .tabs button.active { background:#333; font-weight:bold; }
    label { font-size:13px; font-weight:bold; color:#fff; margin-top:.9rem; display:block; }
    .input-group { position: relative; width:95%; }
    input, select { width:100%; padding:6px 10px; margin-top:4px; font-size:13px;
      background:#fff; color:#000; border:1px solid #4CAF50; border-radius:6px; }
    .mic-btn {
      position:absolute; top:50%; right:10px; transform:translateY(-50%);
      background:none; border:none; font-size:18px; cursor:pointer; }
    .output { margin-top:.7rem; padding:8px; font-size:13px; background:#2a2a2a;
      border-left:4px solid #4CAF50; border-radius:5px; }
    footer { text-align:center; margin-top:2rem; font-size:11px; color:#888; }
  </style>
</head>
<body>
<h1>–ö–æ–º–±–∏–Ω–∏—Ä–∞–Ω –ö–∞–ª–∫—É–ª–∞—Ç–æ—Ä</h1>
<div class="tabs">
  <button id="tab-percent" class="active" onclick="show('percent')">–ü—Ä–æ—Ü–µ–Ω—Ç–∏</button>
  <button id="tab-vat" onclick="show('vat')">–î–î–°</button>
  <button id="tab-currency" onclick="show('currency')">–í–∞–ª—É—Ç–∞</button>
</div>

<div id="percent" class="section">
  <label>–°—É–º–∞ (–æ—Ç—Å—Ç—ä–ø–∫–∞/–Ω–∞–¥—Ü–µ–Ω–∫–∞)</label>
  <div class="input-group">
    <input type="number" id="percentBase"/>
    <button type="button" class="mic-btn" onclick="startDictation()">üé§</button>
  </div>
  <label>–ü—Ä–æ—Ü–µ–Ω—Ç</label>
  <input type="number" id="percentValue" oninput="calcPercent()"/>
  <select id="percentType" onchange="calcPercent()">
    <option value="plus">+ –ù–∞–¥—Ü–µ–Ω–∫–∞</option>
    <option value="minus">‚Äì –û—Ç—Å—Ç—ä–ø–∫–∞</option>
  </select>
  <div id="percentOutput" class="output"></div>
</div>

<!-- ... —Å–µ–∫—Ü–∏–∏ VAT –∏ –≤–∞–ª—É—Ç–∞ —Å—ä—â–æ —Ç—É–∫, –±–µ–∑ –ø—Ä–æ–º–µ–Ω–∏ ... -->

<footer>by Dimitar Kolev</footer>

<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('service-worker.js').catch(err => console.error(err));
}

function show(id) {
  document.querySelectorAll('.section').forEach(s => s.style.display = 'none');
  document.getElementById(id).style.display = 'block';
}
show('percent');

function startDictation() {
  if (!('webkitSpeechRecognition' in window)) return alert('–í–∞—à–∏—è—Ç –±—Ä–∞—É–∑—ä—Ä –Ω–µ –ø–æ–¥–¥—ä—Ä–∂–∞ –≥–ª–∞—Å–æ–≤–æ –≤—ä–≤–µ–∂–¥–∞–Ω–µ.');
  const recog = new webkitSpeechRecognition();
  recog.lang = 'bg-BG'; recog.continuous = false; recog.interimResults = false;
  recog.start();
  recog.onresult = e => {
    document.getElementById('percentBase').value = e.results[0][0].transcript.replace(/\D/g,'');
    calcPercent();
  };
  recog.onerror = () => recog.stop();
}

function calcPercent(){
  const base=+document.getElementById('percentBase').value||0;
  const pct=+document.getElementById('percentValue').value||0;
  const type=document.getElementById('percentType').value;
  const res = type==='plus'? base*(1+pct/100): base*(1-pct/100);
  const diff=Math.abs(res-base);
  document.getElementById('percentOutput').innerHTML=
    `–ù–æ–≤–∞ —Å—É–º–∞: ${res.toFixed(2)} –ª–≤<br>–†–∞–∑–ª–∏–∫–∞: ${diff.toFixed(2)} –ª–≤`;
}
</script>
</body>
</html>


